(()=>{var e={};e.id=29,e.ids=[29],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},62754:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>o.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>m,tree:()=>l});var t=a(88832),s=a(33471),i=a(83127),o=a.n(i),n=a(50280),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(r,d);let l=["",{children:["admin",{children:["dashboard",{children:["content",{children:["staking",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,49502)),"C:\\Users\\a1897\\Desktop\\react\\cloudician\\src\\app\\admin\\dashboard\\content\\staking\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,79691)),"C:\\Users\\a1897\\Desktop\\react\\cloudician\\src\\app\\admin\\dashboard\\content\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,99177)),"C:\\Users\\a1897\\Desktop\\react\\cloudician\\src\\app\\admin\\dashboard\\layout.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,66714))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,13370)),"C:\\Users\\a1897\\Desktop\\react\\cloudician\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,59669,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,2456,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,13305,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,66714))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["C:\\Users\\a1897\\Desktop\\react\\cloudician\\src\\app\\admin\\dashboard\\content\\staking\\page.tsx"],c={require:a,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/admin/dashboard/content/staking/page",pathname:"/admin/dashboard/content/staking",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},46581:(e,r,a)=>{Promise.resolve().then(a.bind(a,95618))},88437:(e,r,a)=>{Promise.resolve().then(a.bind(a,41274))},65225:()=>{},7081:()=>{},36036:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(48209).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},33131:(e,r,a)=>{"use strict";a.d(r,{default:()=>s.a});var t=a(65108),s=a.n(t)},65108:(e,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,r){for(var a in r)Object.defineProperty(e,a,{enumerable:!0,get:r[a]})}(r,{default:function(){return d},getImageProps:function(){return n}});let t=a(79118),s=a(65726),i=a(70658),o=t._(a(29216));function n(e){let{props:r}=(0,s.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,a]of Object.entries(r))void 0===a&&delete r[e];return{props:r}}let d=i.Image},41274:(e,r,a)=>{"use strict";a.d(r,{default:()=>f});var t=a(18652),s=a(9861),i=a(57714),o=a(33131),n=a(5640),d=a(92154),l=a(84804),u=a(91566),c=a(25232),m=a(52782);let g=(0,a(48209).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var h=a(36036),p=a(16515);let x=s.forwardRef(({className:e,...r},a)=>(0,t.jsx)("textarea",{className:(0,p.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 resize-none overflow-y-auto hide-scrollbar",e),ref:a,...r}));function f(){let[e,r]=(0,s.useState)([]),[a,p]=(0,s.useState)({name:"",logo_url:"",reward_min:"",reward_max:"",sort_order:"",synopsis:"",commission:"",unbonding:"",reward:"",validator_address:"",block_explorer:"",about:"",resources:"",staking_guide_title:"",staking_guide:"",full_guide:"",staking_guide_worth:""}),[f,v]=(0,s.useState)(""),[_,j]=(0,s.useState)(""),[b,w]=(0,s.useState)(""),[y,k]=(0,s.useState)(!1),[N,C]=(0,s.useState)(!1),P=(0,i.useRouter)(),F=(0,s.useCallback)(async()=>{k(!0);try{let e=localStorage.getItem("adminToken");if(!e)throw Error("No authentication token found");let a=await fetch("/api/platforms",{headers:{Authorization:`Bearer ${e}`}});if(a.ok){let e=await a.json();r(e)}else if(401===a.status)throw Error("Unauthorized");else throw Error("Failed to fetch platforms")}catch(e){e instanceof Error&&"Unauthorized"===e.message?P.push("/admin/login"):v("Failed to load platforms. Please try again.")}finally{k(!1)}},[P]),q=async e=>{let r=e.target.files?.[0];if(!r)return;let a=new FormData;a.append("file",r);try{let e=localStorage.getItem("adminToken");if(!e)throw Error("No authentication token found");let r=await fetch("/api/upload",{method:"POST",headers:{Authorization:`Bearer ${e}`},body:a});if(r.ok){let{url:e}=await r.json();w(e),p(r=>({...r,logo_url:e}))}else if(401===r.status)throw Error("Unauthorized");else throw Error("Failed to upload image")}catch(e){e instanceof Error&&"Unauthorized"===e.message?P.push("/admin/login"):v("Failed to upload image. Please try again.")}},E=async e=>{if(e.preventDefault(),v(""),j(""),C(!0),!a.logo_url){v("请上传 Logo"),C(!1);return}try{let e=localStorage.getItem("adminToken");if(!e)throw Error("No authentication token found");let r=await fetch("/api/platforms",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({name:a.name,logo_url:a.logo_url,reward_min:parseFloat(a.reward_min),reward_max:parseFloat(a.reward_max),sort_order:parseInt(a.sort_order),synopsis:a.synopsis,commission:parseFloat(a.commission),unbonding:a.unbonding,reward:a.reward,validator_address:a.validator_address,block_explorer:a.block_explorer,about:a.about,resources:a.resources,staking_guide_title:a.staking_guide_title,staking_guide:a.staking_guide,full_guide:a.full_guide,staking_guide_worth:a.staking_guide_worth})});if(r.ok)j("Platform added successfully"),p({name:"",logo_url:"",reward_min:"",reward_max:"",sort_order:"",synopsis:"",commission:"",unbonding:"",reward:"",validator_address:"",block_explorer:"",about:"",resources:"",staking_guide_title:"",staking_guide:"",full_guide:"",staking_guide_worth:""}),w(""),F();else if(401===r.status)throw Error("Unauthorized");else{let e=await r.json();throw Error(e.error||"Failed to add platform")}}catch(e){e instanceof Error?"Unauthorized"===e.message?P.push("/admin/login"):v(e.message):v("An unexpected error occurred")}finally{C(!1)}},S=async e=>{try{let r=localStorage.getItem("adminToken");if(!r)throw Error("No authentication token found");let a=await fetch("/api/platforms",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({id:e})});if(a.ok)j("Platform deleted successfully"),F();else if(401===a.status)throw Error("Unauthorized");else throw Error("Failed to delete platform")}catch(e){e instanceof Error?"Unauthorized"===e.message?P.push("/admin/login"):v(e.message):v("An unexpected error occurred")}};return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"管理 Staking Platforms"}),(0,t.jsx)("input",{type:"file",id:"logo-upload",onChange:q,accept:"image/*",className:"hidden"}),(0,t.jsx)("div",{className:"flex items-center gap-4",children:b&&(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(o.default,{src:b,alt:"Logo preview",width:60,height:60,className:"rounded-lg object-contain"}),(0,t.jsx)("button",{onClick:()=>{w(""),p(e=>({...e,logo_url:""}))},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:(0,t.jsx)(m.A,{className:"h-4 w-4"})})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[(0,t.jsxs)(u.Zp,{className:"max-h-[500px] overflow-y-auto hide-scrollbar",children:[(0,t.jsx)(u.aR,{children:(0,t.jsx)(u.ZB,{children:"添加 New Platform"})}),(0,t.jsx)(u.Wu,{children:(0,t.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.J,{htmlFor:"name",children:"Platform 名称"}),(0,t.jsx)(d.p,{id:"name",value:a.name,onChange:e=>p({...a,name:e.target.value}),required:!0})]}),(0,t.jsx)("div",{className:"flex justify-end items-end",children:(0,t.jsxs)(l.J,{htmlFor:"logo-upload",className:"h-10 cursor-pointer inline-flex items-center gap-2 bg-white px-4 py-2 rounded-lg shadow hover:bg-gray-50",children:[(0,t.jsx)(g,{className:"h-5 w-5"}),"上传 Logo"]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.J,{htmlFor:"reward_min",children:"最低 Reward (%)"}),(0,t.jsx)(d.p,{id:"reward_min",type:"number",step:"1",min:"0",max:"100",value:a.reward_min,onChange:e=>p({...a,reward_min:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.J,{htmlFor:"reward_max",children:"最高 Reward (%)"}),(0,t.jsx)(d.p,{id:"reward_max",type:"number",step:"1",min:"0",max:"100",value:a.reward_max,onChange:e=>p({...a,reward_max:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.J,{htmlFor:"sort_order",children:"Sort Order（平台排序顺位）"}),(0,t.jsx)(d.p,{id:"sort_order",type:"number",min:"0",value:a.sort_order,onChange:e=>p({...a,sort_order:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.J,{htmlFor:"commission",children:"Commission(佣金) (%)"}),(0,t.jsx)(d.p,{id:"commission",name:"commission",type:"number",step:"0.1",min:"0",max:"100",value:a.commission,onChange:e=>p({...a,commission:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.J,{htmlFor:"unbonding",children:"Unbonding(解除绑定)"}),(0,t.jsx)(d.p,{id:"unbonding",name:"unbonding",value:a.unbonding,onChange:e=>p({...a,unbonding:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.J,{htmlFor:"reward",children:"Reward(奖励)"}),(0,t.jsx)(d.p,{id:"reward",name:"reward",value:a.reward,onChange:e=>p({...a,reward:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.J,{htmlFor:"validator_address",children:"Validator Address(验证地址)"}),(0,t.jsx)(d.p,{id:"validator_address",name:"validator_address",value:a.validator_address,onChange:e=>p({...a,validator_address:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.J,{htmlFor:"block_explorer",children:"Block Explorer(区块浏览器链接)"}),(0,t.jsx)(d.p,{id:"block_explorer",name:"block_explorer",value:a.block_explorer,onChange:e=>p({...a,block_explorer:e.target.value}),required:!0})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.J,{htmlFor:"synopsis",children:"Synopsis(简介)"}),(0,t.jsx)(d.p,{id:"synopsis",name:"synopsis",value:a.synopsis,onChange:e=>p({...a,synopsis:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.J,{htmlFor:"about",children:"About(平台详细介绍)"}),(0,t.jsx)(x,{id:"about",name:"about",value:a.about,onChange:e=>p({...a,about:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.J,{htmlFor:"resources",children:"Resources(相关链接，注意每个链接之间用逗号隔开)"}),(0,t.jsx)(x,{id:"resources",name:"resources",value:a.resources,onChange:e=>p({...a,resources:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.J,{htmlFor:"staking_guide_title",children:"Stake_Guide_Title(指南标题)"}),(0,t.jsx)(d.p,{id:"staking_guide_title",name:"staking_guide_title",value:a.staking_guide_title,onChange:e=>p({...a,staking_guide_title:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.J,{htmlFor:"staking_guide",children:"Staking_Guide(指南内容)"}),(0,t.jsx)(x,{id:"staking_guide",name:"staking_guide",value:a.staking_guide,onChange:e=>p({...a,staking_guide:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.J,{htmlFor:"full_guide",children:"Full_Guide(完整指南链接)"}),(0,t.jsx)(d.p,{id:"full_guide",name:"full_guide",value:a.full_guide,onChange:e=>p({...a,full_guide:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.J,{htmlFor:"staking_guide_worth",children:"staking_guide_worth(用户信息填写表格上面的内容)"}),(0,t.jsx)(d.p,{id:"staking_guide_worth",name:"staking_guide_worth",value:a.staking_guide_worth,onChange:e=>p({...a,staking_guide_worth:e.target.value}),required:!0})]}),f&&(0,t.jsx)(c.Fc,{variant:"destructive",children:(0,t.jsx)(c.TN,{children:f})}),_&&(0,t.jsx)(c.Fc,{children:(0,t.jsx)(c.TN,{children:_})}),(0,t.jsx)(n.$,{type:"submit",className:"w-full",disabled:N,children:N?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.A,{className:"mr-2 h-4 w-4 animate-spin"}),"添加 Platform 中..."]}):"添加 Platform"})]})})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"现有 Platforms"}),(0,t.jsx)("div",{className:"max-h-[600px] space-y-6 overflow-y-auto hide-scrollbar",children:y?(0,t.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,t.jsx)(h.A,{className:"h-8 w-8 animate-spin"})}):e.length>0?e.map(e=>(0,t.jsxs)(u.Zp,{children:[(0,t.jsx)(u.aR,{children:(0,t.jsxs)(u.ZB,{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(o.default,{src:e.logo_url,alt:`${e.name} logo`,width:32,height:32,className:"rounded-lg object-contain"}),e.name]}),(0,t.jsx)(n.$,{variant:"destructive",size:"sm",onClick:()=>S(e.id),children:"删除"})]})}),(0,t.jsx)(u.Wu,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("p",{children:["Reward 范围: ",e.reward_min,"% -"," ",e.reward_max,"%"]}),(0,t.jsxs)("p",{children:["Sort Order: ",e.sort_order]})]})})]},e.id)):(0,t.jsx)("p",{children:"未找到任何平台，请添加新平台"})})]})]})]})})}x.displayName="Textarea"},25232:(e,r,a)=>{"use strict";a.d(r,{Fc:()=>d,TN:()=>l});var t=a(18652),s=a(9861),i=a(13801),o=a(16515);let n=(0,i.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=s.forwardRef(({className:e,variant:r,...a},s)=>(0,t.jsx)("div",{ref:s,role:"alert",className:(0,o.cn)(n({variant:r}),e),...a}));d.displayName="Alert",s.forwardRef(({className:e,...r},a)=>(0,t.jsx)("h5",{ref:a,className:(0,o.cn)("mb-1 font-medium leading-none tracking-tight",e),...r})).displayName="AlertTitle";let l=s.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,o.cn)("text-sm [&_p]:leading-relaxed",e),...r}));l.displayName="AlertDescription"},91566:(e,r,a)=>{"use strict";a.d(r,{Wu:()=>l,ZB:()=>d,Zp:()=>o,aR:()=>n});var t=a(18652),s=a(9861),i=a(16515);let o=s.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...r}));o.displayName="Card";let n=s.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...r}));n.displayName="CardHeader";let d=s.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,i.cn)("font-semibold leading-none tracking-tight",e),...r}));d.displayName="CardTitle",s.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",e),...r})).displayName="CardDescription";let l=s.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,i.cn)("p-6 pt-0",e),...r}));l.displayName="CardContent",s.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter"},84804:(e,r,a)=>{"use strict";a.d(r,{J:()=>u});var t=a(18652),s=a(9861),i=a(82705),o=s.forwardRef((e,r)=>(0,t.jsx)(i.sG.label,{...e,ref:r,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));o.displayName="Label";var n=a(13801),d=a(16515);let l=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=s.forwardRef(({className:e,...r},a)=>(0,t.jsx)(o,{ref:a,className:(0,d.cn)(l(),e),...r}));u.displayName=o.displayName},79691:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>s});var t=a(48408);function s({children:e}){return(0,t.jsxs)("div",{className:"py-8 px-10",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold mb-6",children:"内容管理"}),e]})}},49502:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>i});var t=a(48408),s=a(95618);function i(){return(0,t.jsx)("div",{children:(0,t.jsx)(s.default,{})})}},95618:(e,r,a)=>{"use strict";a.d(r,{default:()=>t});let t=(0,a(44444).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\a1897\\\\Desktop\\\\react\\\\cloudician\\\\src\\\\components\\\\staking.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\a1897\\Desktop\\react\\cloudician\\src\\components\\staking.tsx","default")}};var r=require("../../../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[660,687,857,503,519,386,658,771],()=>a(62754));module.exports=t})();